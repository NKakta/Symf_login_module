{% extends 'layouts/admin-base.html.twig' %}

{% block title %} Products {% endblock %}

{% block body %}
    <div class="card">
        <a href="{{ path('create_product') }}">
            <button style="width: 25%;" type="button" class="btn btn-block btn-default">
                Create new Product
            </button>
        </a>
        <div class="card-header">
            <h3 class="card-title">Products</h3>
            <div class="card-tools">
                <div class="input-group input-group-sm">
                    {{ form_start(form, {'method': 'GET'}) }}
                    {{ form_label(form.name) }}
                    {{ form_widget(form.name) }}
                    <button type="submit" class="btn btn-default" style="float:right;"><i class="fas fa-search"></i></button>
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
        <!-- /.card-header -->
        <div class="card-body">
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th style="width: 10px">#</th>
                    <th>Product</th>
                    <th>Price</th>
                    <th>Category</th>
                    <th>Photo</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                {% for product in products %}
                <tr>
                    <td>{{ loop.index }}.</td>
                    <td>
                        <a href="{{ path('show_product', { 'id': product.id }) }}">
                            {{ product.name }}
                        </a>
                    </td>
                    <td>
                        {{ product.price }}
                    </td>
                    <td>
                        {{ product.category }}
                    </td>
                    <td>
                        <img src="{{ asset('assets/images/products/' ~ product.photoFilename) }}" alt="product image">
                    </td>
                    <td>
                        <a class="btn btn-info btn-sm" href="{{ path('edit_product', { 'id': product.id }) }}">
                            <i class="fas fa-pencil-alt">
                            </i>
                            Edit
                        </a>
                        <a class="btn btn-danger btn-sm" href="{{ path('delete_product', { 'id': product.id }) }}">
                            <i class="fas fa-trash">
                            </i>
                            Delete
                        </a>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <!-- /.card-body -->
        <div class="card-footer clearfix">
            {{ knp_pagination_render(products) }}
        </div>
    </div>
{% endblock %}
